spring.application.name=api-gateway
server.port=${SERVER_PORT:8084}

# --- LOGGING ---
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.com.example.api_gateway=DEBUG
logging.level.org.springframework.web.reactive=DEBUG

# --- RUTE GATEWAY (Proxy) ---

# 0. Auth Public
spring.cloud.gateway.routes[0].id=auth-service-public
spring.cloud.gateway.routes[0].uri=${AUTH_BASE_URL:http://auth-service:8083}
spring.cloud.gateway.routes[0].predicates[0]=Path=/auth/login,/auth/register

# 1. Auth Private
spring.cloud.gateway.routes[1].id=auth-service-private
spring.cloud.gateway.routes[1].uri=${AUTH_BASE_URL:http://auth-service:8083}
spring.cloud.gateway.routes[1].predicates[0]=Path=/auth/**

# 2. Users Routes (Legacy /users)
spring.cloud.gateway.routes[2].id=users-service
spring.cloud.gateway.routes[2].uri=${USERS_BASE_URL:http://users-service:8081}
spring.cloud.gateway.routes[2].predicates[0]=Path=/users/**
spring.cloud.gateway.routes[2].filters[0]=AuthenticationFilter

# 3. Devices Routes
spring.cloud.gateway.routes[3].id=devices-service
spring.cloud.gateway.routes[3].uri=${DEVICES_BASE_URL:http://devices-service:8082}
spring.cloud.gateway.routes[3].predicates[0]=Path=/devices/**
spring.cloud.gateway.routes[3].filters[0]=AuthenticationFilter

# 4. Chat Service Routes
spring.cloud.gateway.routes[4].id=chat-service
spring.cloud.gateway.routes[4].uri=${CHAT_BASE_URL:http://chat-service:8086}
spring.cloud.gateway.routes[4].predicates[0]=Path=/chat/**
spring.cloud.gateway.routes[4].filters[0]=AuthenticationFilter

# 5. WebSocket
spring.cloud.gateway.routes[5].id=websocket-service
spring.cloud.gateway.routes[5].uri=${WEBSOCKET_BASE_URL:http://websocket-service:8087}
spring.cloud.gateway.routes[5].predicates[0]=Path=/ws/**
spring.cloud.gateway.routes[5].metadata.websocket=true

# 6. Load Balancer
spring.cloud.gateway.routes[6].id=load-balancer-service
spring.cloud.gateway.routes[6].uri=${LOAD_BALANCER_BASE_URL:http://load-balancer-service:8088}
spring.cloud.gateway.routes[6].predicates[0]=Path=/load-balancer/**
spring.cloud.gateway.routes[6].filters[0]=AuthenticationFilter

# 7. Monitoring
spring.cloud.gateway.routes[7].id=monitoring-service
spring.cloud.gateway.routes[7].uri=${MONITORING_BASE_URL:http://monitoring-service:8085}
spring.cloud.gateway.routes[7].predicates[0]=Path=/monitoring/**
spring.cloud.gateway.routes[7].filters[0]=AuthenticationFilter

# 8. RUTA PEOPLE (USERS SERVICE)
spring.cloud.gateway.routes[8].id=users-service-people
spring.cloud.gateway.routes[8].uri=${USERS_BASE_URL:http://users-service:8081}
spring.cloud.gateway.routes[8].predicates[0]=Path=/people/**
spring.cloud.gateway.routes[8].filters[0]=AuthenticationFilter

# --- CONFIGURARE WEBCLIENT (Pentru Orchestrator) ---
# Acestea sunt CRITICE pentru ca RegisterOrchestrator s? func?ioneze
auth.base-url=http://auth-service:8083
users.base-url=http://users-service:8081
devices.base-url=http://devices-service:8082

# --- SECRETE ---
jwt.secret=${JWT_SECRET:404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970}
internal.secret=${INTERNAL_SECRET:CheiaMeaSecretaFoarteSigura_DS2025}

# --- CORS ---
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins=http://localhost
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=true